"use strict";(self.webpackChunktime_note_frontend=self.webpackChunktime_note_frontend||[]).push([[511],{1511:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(7294),a=r(5998),o=r(7307),c=r(9580),u=r(6486),i=r.n(u),l=r(458),m=r(9269),s=r(6043),f=r(1728),p=r(6195);function d(e,t,r,n,a,o,c){try{var u=e[o](c),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,a)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(){(0,c.k6)();var e=(0,a.I0)(),t=((0,c.TH)(),(0,a.v9)((function(e){return e.auth.user}))),r=w(n.useState(!1),2),u=r[0],b=r[1],y=w(n.useState(null),2),g=y[0],E=y[1];n.useEffect((function(){e((0,p.d2)())}),[]),n.useEffect((function(){E(t)}),[t]);var O=function(e){E((function(t){return h(h({},t),{},v({},e.target.name,e.target.value))}))},j=function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),t.prev=1,console.log("formData => ",g),!u){t.next=8;break}if(g.password===g.repeatPassword){t.next=6;break}throw new Error("密碼需與密碼確認一致");case 6:if(!(g.password.length<8)){t.next=8;break}throw new Error("密碼長度需大於8個字元");case 8:return t.next=10,e((0,p.k3)(h(h({},i().pick(g,["name"])),u?{password:g.password}:{})));case 10:n=t.sent,(0,o.SI)(n),b(!1),m.Z.success("更新成功"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),m.Z.fail(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(e){d(o,n,a,c,u,"next",e)}function u(e){d(o,n,a,c,u,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}();return n.createElement(s.I,null,n.createElement(l.Container,{p:"2em",m:{b:"2em"}},n.createElement(f.Zb,{p:"3em",rounded:"md",shadow:"3"},n.createElement(l.Text,{textSize:"heading"},"個人資料"),g&&n.createElement("form",{onSubmit:j},n.createElement(l.Text,{m:".5rem",p:{l:".15em"},textSize:"title"},g.email),n.createElement(l.Input,{placeholder:"名字",m:{t:"1.5em",r:".5rem",b:".5rem",l:".5rem"},name:"name",value:g.name,onChange:function(e){return O(e)}}),u&&n.createElement(n.Fragment,null,n.createElement(f.WU,{m:{t:"1.5em",r:".5rem",b:".5rem",l:".5rem"},value:g.password,name:"password",onChange:function(e){return O(e)},placeholder:"新密碼"}),n.createElement(f.WU,{m:{t:"1.5em",r:".5rem",b:".5rem",l:".5rem"},name:"repeatPassword",value:g.repeatPassword,onChange:function(e){return O(e)},placeholder:"密碼確認"})),n.createElement(l.Label,{onClick:function(){return b((function(e){return!e}))},align:"center",textWeight:"600",m:{t:"1.5em",r:".5rem",b:".5rem",l:".75rem"}},n.createElement(l.Switch,{checked:u}),"是否重設密碼"),n.createElement(l.Div,{d:"flex",justify:"flex-end"},n.createElement(l.Button,{bg:"warning700",hoverBg:"warning800",rounded:"circle",p:{r:"1.5rem",l:"1.5rem"},shadow:"3",hoverShadow:"4",type:"submit"},"送出"))))))}}}]);