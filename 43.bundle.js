"use strict";(self.webpackChunktime_note_frontend=self.webpackChunktime_note_frontend||[]).push([[43],{876:(e,t,r)=>{r.d(t,{i:()=>a});var n=r(7294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const a=function(){var e,t,r=(e=n.useState([0,0]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],c=r[1];return n.useLayoutEffect((function(){var e=function(){c([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}},6043:(e,t,r)=>{r.d(t,{I:()=>K});var n=r(7294),o=r(5998),a=r(9580),c=r(7307),u=(r(7484),r(6486)),i=r.n(u),l=r(458),s=r(6195),f=r(1754),m=r(383),p=r(9269),d=r(2909),y=r(5755),g=r(1728);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={w:"100%",bg:"gray100",textColor:"black700",rounded:"0",d:"flex",justify:"flex-start",transition:!0,hoverBg:"gray500"},O=w({w:"100%"},x),j=w(w({},x),{},{bg:"gray400"}),S=w(w({},O),{},{bg:"gray400"});const C=function(e){var t,r,o=e.drawerTypes,a=e.drawerCategories,c=e.pathname,u=e.openForm,s=e.deleteCategory,f=(t=(0,y.Wd)("CategoryId",y.yz),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1];return n.createElement(l.Div,{bg:"gray100",h:"100%",minW:"250px"},n.createElement(d.rU,{to:"/notes"},n.createElement(l.Button,"/notes"===c?j:O,"全部類型")),i().isArray(o)?o.map((function(e,t){return n.createElement(d.rU,{to:"/notes/".concat(e.value).concat(m?"?CategoryId=".concat(m):""),key:e.value},n.createElement(l.Button,c==="/notes/".concat(e.value)?S:O,e.name))})):n.createElement(g.Od,{count:3}),n.createElement("hr",null),n.createElement(l.Button,v({},!m&&c.includes("/notes")?S:O,{onClick:function(){return m?p(void 0):null}}),"全部分類(自定義分類)"),i().isArray(a)?a.map((function(e,t){return n.createElement(l.Div,{w:"100%",d:"flex",flexDir:"row"},n.createElement(l.Button,v({key:e.id},m===e.id&&c.includes("/notes")?j:x,{w:m!==e.id?"calc(100% - 70px)":"calc(100% - 35px)",onClick:function(){return m!==e.id?p(e.id):null}}),n.createElement(l.Icon,{name:"Dot",size:"20px",color:e.color,m:{r:".25em"}}),e.name),n.createElement(l.Button,v({},x,{w:"35px",d:"flex",justify:"center",align:"center",onClick:function(){return u({rowId:e.id})}}),n.createElement(l.Icon,{name:"Edit",size:"20px"})),m!==e.id&&n.createElement(l.Button,v({},x,{w:"35px",d:"flex",justify:"center",align:"center",onClick:function(){return s(e.id,e.name)}}),n.createElement(l.Icon,{name:"Delete",size:"20px"})))})):n.createElement(g.Od,{count:3}),n.createElement(l.Button,v({},O,{onClick:function(){return u({})}}),n.createElement(l.Icon,{name:"Add",color:"black",size:"20px",m:{r:"1em"}}),"新增分類"))};var k=r(3508);const I=function(e){var t=e.isOpen,r=e.category,o=e.handleClose,a=e.editForm,c=e.handleSave;return n.createElement(l.Modal,{isOpen:t,onClose:o,align:"center",rounded:"md"},n.createElement(l.Text,{textSize:"heading"},i().has(r,"id")?"編輯":"新增"),n.createElement(l.Row,{d:"flex",m:{b:"4rem"}},n.createElement(l.Col,{size:"12"},n.createElement(l.Input,{placeholder:"標籤名稱",w:"100%",value:r.name,onChange:function(e){return a(e.target.value,"name")},m:{t:".25em",b:".25em"}})),n.createElement(l.Col,{size:"12"},n.createElement(l.Label,{m:{t:".5em"}},"標籤顏色"),n.createElement(k.FJ,{style:{marginTop:".2em"},color:r.color,onChangeComplete:function(e){return a(e.hex,"color")}}))),n.createElement(l.Div,{d:"flex",justify:"flex-end"},n.createElement(l.Button,{onClick:o,bg:"gray200",textColor:"medium",m:{r:"1rem"}},"取消"),n.createElement(l.Button,{onClick:c,bg:"info700"},"保存")))};var A=r(5697),P=r.n(A),D=r(6513),M=r(876);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e){var t=e.children,r=e.appBar,o=e.drawerContent,a=e.topMenu,c=e.categoryFormModal,u=localStorage.getItem("sidebar-collapsed"),i=T(n.useState(!u),2),l=i[0],s=i[1],f=function(){s((function(e){return e?localStorage.setItem("sidebar-collapsed",!0):localStorage.removeItem("sidebar-collapsed"),!e}))},m=T((0,M.i)(),1)[0];return n.useEffect((function(){s(m>720)}),[m]),n.createElement(D.Z,{sidebar:o,onSetOpen:f,docked:m>720&&l,open:m<=720&&l,styles:{sidebar:{background:"white"}}},r&&n.createElement(r,{handleToggler:f,topMenu:a,categoryFormModal:c}),t)}z.defaultProps={children:null,appBar:null,categoryFormModal:null,drawerContent:n.createElement("b",null,"Sidebar content"),topMenu:n.createElement(l.Div,null,"menu")},z.propTypes={children:P().node,appBar:P().elementType,categoryFormModal:P().elementType,drawerContent:P().node,topMenu:P().node};const R=z;function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e){var t,r,o=e.handleToggler,c=e.topMenu,u=(0,a.TH)(),i=(t=n.useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],f=i[1];return n.createElement(l.Div,{width:"100%",height:"50px",bg:"gray100",shadow:"2",p:"1rem",d:"flex",flexDir:"row",justify:"space-between"},n.createElement(l.Button,{h:"2.5rem",w:"2.5rem",bg:"gray300",hoverBg:"gray400",onClick:function(){return o()},rounded:"lg",transition:!0},n.createElement(l.Icon,{name:"Menu",size:"20px",color:"gray700"})),n.createElement(l.Dropdown,{isOpen:s,onClick:function(){return f((function(e){return!e}))},menu:c,maxW:"200px"},n.createElement(l.Icon,{name:"UserCircle",size:"20px",color:"gray700"}),u.pathname.includes("profile")&&"個人資料"))}U.defaultProps={topMenu:n.createElement(l.Div,null,"menu"),handleToggler:function(){}},U.defaultProps={topMenu:P().node,handleToggler:P().func};const Z=U,$=function(){var e=(0,o.I0)();return n.createElement(l.Div,{p:{x:"1rem",y:"0.5rem"}},[{name:"個人資料",to:"/profile"},{name:"登出",action:function(){return e((0,s.Cd)())}}].map((function(e,t){return n.createElement(d.rU,{to:e.to||"#",key:e.name},n.createElement(l.Anchor,{d:"block",p:{y:"0.25rem"},hoverBg:"gray200",onClick:e.action?function(){return e.action()}:null},e.name))})))};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r,n,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,o)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){J(a,n,o,c,u,"next",e)}function u(e){J(a,n,o,c,u,"throw",e)}c(void 0)}))}}var q={name:"",color:"#969696"};function K(e){var t=(0,o.I0)(),r=(0,a.TH)(),u=(0,o.v9)((function(e){return e.layout.drawerTypes})),s=(0,o.v9)((function(e){return e.layout.drawerCategories}));n.useEffect((function(){Q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t((0,m.y9)());case 2:return e.next=4,t((0,f.pE)());case 4:case"end":return e.stop()}}),e)})))()}),[]);var d=H(n.useState(!1),2),y=d[0],g=d[1],v=H(n.useState(W({},q)),2),b=v[0],h=v[1],w=function(){var e=Q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!1),h(W({},q));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Q(regeneratorRuntime.mark((function e(r){var n,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.rowId,o=void 0===n?null:n,console.log("openForm ==="),!o){e.next=12;break}return e.next=5,t((0,f.jn)({id:o}));case 5:return a=e.sent,e.next=8,(0,c.SI)(a);case 8:u=e.sent,g((function(e){return h(u),!0})),e.next=13;break;case 12:g((function(e){return h(W({},q)),!0}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Q(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("formData => ",b),!b.id){e.next=8;break}return e.next=5,t((0,f.yr)(b));case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,t((0,f.k4)(b));case 10:r=e.sent;case 11:return e.next=13,(0,c.SI)(r);case 13:p.Z.success("".concat(b.id?"更新":"新增","成功")),w(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),p.Z.fail(i().get(e.t0,"message")||i().get(e.t0,"payload.error"));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Q(regeneratorRuntime.mark((function e(r,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.awiatQuestion('是否刪除"'.concat(n,'"分類?'),null);case 3:if(!e.sent.isConfirmed){e.next=11;break}return e.next=7,t((0,f.uu)({id:r}));case 7:return o=e.sent,e.next=10,(0,c.SI)(o);case 10:p.Z.success("刪除成功");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p.Z.fail(i().get(e.t0,"message")||i().get(e.t0,"payload.error"));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return n.createElement(R,{appBar:Z,topMenu:n.createElement($,null),drawerContent:n.createElement(C,{drawerTypes:u,drawerCategories:s,pathname:r.pathname,openForm:E,deleteCategory:O})},n.createElement(I,{isOpen:y,category:b,handleClose:function(){return w()},editForm:function(e,t){h((function(r){return W(W({},r),{},_({},t,e))}))},handleSave:function(){return x()}}),n.createElement(l.Div,{tag:"main",flexGrow:"1",p:{b:".5em",l:".5em",r:".5em"},d:"flex",justify:"center",align:"flex-start"},e.children))}}}]);